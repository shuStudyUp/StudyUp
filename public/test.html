<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StudyUp Test Page</title>
  <script src="https://code.jquery.com/jquery-latest.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f4f7f6;
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 25px;
    }
    .section {
      margin-bottom: 30px;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background-color: #fff;
    }
    .section h3 {
      color: #3498db;
      margin-bottom: 15px;
    }
    input[type="text"], input[type="email"], input[type="password"], textarea {
      width: calc(100% - 22px);
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 5px;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #2980b9;
    }
    #chatResponse, #userListResponse, #userStatsResponse, #problemListResponse, #selectResultDisplay,
    .message-display {
      margin-top: 10px;
      white-space: pre-wrap;
      border: 1px solid #eee;
      padding: 10px;
      width: 100%;
      min-height: 50px;
      background-color: #f9f9f9;
      border-radius: 5px;
    }
    .error-message {
      color: red;
      font-weight: bold;
      margin-top: 5px;
    }
    .success-message {
      color: green;
      font-weight: bold;
      margin-top: 5px;
    }
    hr {
      margin: 30px 0;
      border: 0;
      border-top: 1px solid #eee;
    }
    /* ë¡œê·¸ì¸ ì„¹ì…˜ ë‚´ 'íšŒì›ê°€ì…' ë§í¬ ìŠ¤íƒ€ì¼ */
    .scroll-to-section {
      color: #3498db;
      cursor: pointer;
      text-decoration: underline;
    }
    .scroll-to-section:hover {
      color: #2980b9;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>StudyUp í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h2>

    <!-- ChatGPT ì—°ë™ -->
    <div class="section" id="chatSection">
      <h3>ChatGPT ì—°ë™</h3>
      <input type="text" id="chatInput" placeholder="ChatGPTì—ê²Œ ì§ˆë¬¸í•˜ê¸°" />
      <button onclick="sendChat()">ì „ì†¡</button>
      <div id="chatResponse" class="message-display"></div>
    </div>

    <hr />

    <!-- ê¸°ì¡´ ë°ì´í„° ê´€ë¦¬ (test_tb) -->
    <div class="section">
      <h3>ê¸°ì¡´ ë°ì´í„° ê´€ë¦¬ (test_tb)</h3>
      <button onclick="test_select()">Select (ëª¨ë“  ë°ì´í„° ì¡°íšŒ)</button>
      <div id="selectResultDisplay" class="message-display"></div>
      <br>
      <input type="text" id="insertNameInput" placeholder="ì¶”ê°€í•  ì´ë¦„ ì…ë ¥" />
      <button onclick="test_insert($('#insertNameInput').val())">Insert (ë°ì´í„° ì¶”ê°€)</button>
      <div id="insertStatusMessage" class="message-display"></div>
      <br>
      <input type="text" id="deleteNameInput" placeholder="ì‚­ì œí•  ì´ë¦„ ì…ë ¥" />
      <button onclick="test_delete($('#deleteNameInput').val())">Delete (ë°ì´í„° ì‚­ì œ)</button>
      <div id="deleteStatusMessage" class="message-display"></div>
    </div>

    <hr />

    <!-- ë¡œê·¸ì¸ ì„¹ì…˜ -->
    <div class="section" id="loginSection">
      <h3>ë¡œê·¸ì¸</h3>
      <input type="text" id="loginUsernameOrEmail" placeholder="ì‚¬ìš©ì ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼" />
      <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸" />
      <button onclick="loginUser()">ë¡œê·¸ì¸</button>
      <button onclick="logoutUser()">ë¡œê·¸ì•„ì›ƒ</button>
      <div id="loginStatus" class="message-display"></div>
      <p>ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <span class="scroll-to-section" onclick="scrollToSection('userManagementSection')">íšŒì›ê°€ì…</span></p>
    </div>

    <hr />

    <!-- ì‚¬ìš©ì ê´€ë¦¬ ì„¹ì…˜ -->
    <div class="section" id="userManagementSection">
      <h3>ì‚¬ìš©ì ê´€ë¦¬ (users í…Œì´ë¸”)</h3>
      <h4>ì‚¬ìš©ì ìƒì„±</h4>
      <input type="text" id="createUsername" placeholder="ì‚¬ìš©ì ì´ë¦„" />
      <input type="email" id="createUserEmail" placeholder="ì´ë©”ì¼" />
      <input type="password" id="createUserPassword" placeholder="ë¹„ë°€ë²ˆí˜¸" />
      <button onclick="createUser()">ì‚¬ìš©ì ìƒì„±</button>
      <div id="createUserStatus" class="message-display"></div>

      <h4>ì‚¬ìš©ì ëª©ë¡</h4>
      <button onclick="listUsers()">ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ</button>
      <div id="userListResponse" class="message-display"></div>

      <h4>ì‚¬ìš©ì í†µê³„</h4>
      <button onclick="getUserStats()">ì‚¬ìš©ì í†µê³„ ì¡°íšŒ</button>
      <div id="userStatsResponse" class="message-display"></div>

      <h4>ì‚¬ìš©ì ì‚­ì œ</h4>
      <input type="text" id="deleteUserId" placeholder="ì‚­ì œí•  ì‚¬ìš©ì ID ì…ë ¥" />
      <button onclick="deleteUser()">ì‚¬ìš©ì ì‚­ì œ</button>
      <div id="deleteUserStatus" class="message-display"></div>
    </div>

    <hr />

    <!-- ë¬¸ì œ ì€í–‰ ê´€ë¦¬ -->
    <div class="section">
      <h3>ë¬¸ì œ ì€í–‰ ê´€ë¦¬ (problems í…Œì´ë¸”)</h3>
      <h4>ë¬¸ì œ ì¶”ê°€ (ìˆ˜ë™)</h4>
      <input type="text" id="addProblemQuestion" placeholder="ë¬¸ì œ ë‚´ìš© ì…ë ¥ (ì˜ˆ: 2 + 2ëŠ” ë¬´ì—‡ì¸ê°€ìš”?)" />
      <input type="text" id="addProblemAnswer" placeholder="ì •ë‹µ ì…ë ¥ (ì˜ˆ: 4)" />
      <input type="text" id="addProblemCategory" placeholder="ì¹´í…Œê³ ë¦¬ ì…ë ¥ (ì˜ˆ: ìˆ˜í•™)" />
      <input type="text" id="addProblemDifficulty" placeholder="ë‚œì´ë„ ì…ë ¥ (ì˜ˆ: í•˜, ì¤‘, ìƒ)" />
      <button onclick="addProblem()">ë¬¸ì œ ì¶”ê°€</button>
      <div id="addProblemStatus" class="message-display"></div>

      <h4>ë¬¸ì œ ëª©ë¡</h4>
      <button onclick="listProblems()">ë¬¸ì œ ëª©ë¡ ì¡°íšŒ</button>
      <div id="problemListResponse" class="message-display"></div>

      <h4>ë¬¸ì œ ì‚­ì œ</h4>
      <input type="text" id="deleteProblemId" placeholder="ì‚­ì œí•  ë¬¸ì œ ID ì…ë ¥" />
      <button onclick="deleteProblem()">ë¬¸ì œ ì‚­ì œ</button>
      <div id="deleteProblemStatus" class="message-display"></div>
    </div>
  </div>

  <script>
    function displayMessage(elementId, message, type = 'error') {
      const element = $(`#${elementId}`);
      element.removeClass('error-message success-message').text('');
      if (message) {
        if (type === 'error') element.addClass('error-message');
        else if (type === 'success') element.addClass('success-message');
        element.text(message);
      }
    }

    function sendChat() {
      const message = $('#chatInput').val().trim();
      const responseDiv = 'chatResponse';
      if (!message) return displayMessage(responseDiv, 'ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”.', 'error');
      displayMessage(responseDiv, 'ì‘ë‹µ ëŒ€ê¸° ì¤‘...', 'success');
      $.ajax({
        url: '/chat',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ message }),
        success: function(res) {
          displayMessage(responseDiv, res.reply, 'success');
          $('#chatInput').val('');
        },
        error: function(xhr) {
          displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + xhr.status + ' ' + xhr.statusText, 'error');
        }
      });
    }

    function test_select() {
      const responseDiv = 'selectResultDisplay';
      displayMessage(responseDiv, 'ë°ì´í„° ì¡°íšŒ ì¤‘...', 'success');
      $.post("/select.do", function(res) {
        if (res.data && res.data.list) {
          let html = '<ul>';
          if (res.data.list.length === 0) html += '<li>ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
          else res.data.list.forEach(item => {
            html += `<li>ID: ${item.id}, ì´ë¦„: ${item.name}, ìƒì„±ì¼: ${new Date(item.create_time).toLocaleString()}</li>`;
          });
          html += '</ul>';
          $(`#${responseDiv}`).html(html);
        } else displayMessage(responseDiv, 'ì¡°íšŒ ê²°ê³¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
      }).fail(xhr => {
        displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + xhr.status + ' ' + xhr.statusText, 'error');
      });
    }

    function test_insert(msg) {
      const responseDiv = 'insertStatusMessage';
      if (!msg) return displayMessage(responseDiv, 'ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.', 'error');
      displayMessage(responseDiv, 'ë°ì´í„° ì¶”ê°€ ì¤‘...', 'success');
      $.post("/insert.do", { name: msg }, function() {
        displayMessage(responseDiv, 'ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        $('#insertNameInput').val('');
      }).fail(xhr => {
        displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + xhr.status + ' ' + xhr.statusText, 'error');
      });
    }

    function test_delete(msg) {
      const responseDiv = 'deleteStatusMessage';
      if (!msg) return displayMessage(responseDiv, 'ì‚­ì œí•  ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.', 'error');
      displayMessage(responseDiv, 'ë°ì´í„° ì‚­ì œ ì¤‘...', 'success');
      $.post("/delete.do", { name: msg }, function() {
        displayMessage(responseDiv, 'ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        $('#deleteNameInput').val('');
      }).fail(xhr => {
        displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + xhr.status + ' ' + xhr.statusText, 'error');
      });
    }

    function createUser() {
      const username = $('#createUsername').val().trim();
      const email = $('#createUserEmail').val().trim();
      const password = $('#createUserPassword').val().trim();
      const responseDiv = 'createUserStatus';
      if (!username || !email || !password)
        return displayMessage(responseDiv, 'ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
      displayMessage(responseDiv, 'ì‚¬ìš©ì ìƒì„± ì¤‘...', 'success');
      $.ajax({
        url: '/users/create',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ username, email, password }),
        success: function(res) {
          displayMessage(responseDiv, res.message || 'ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
          $('#createUsername, #createUserEmail, #createUserPassword').val('');
        },
        error: function(xhr) {
          let errorMessage = 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
          try {
            const errorData = JSON.parse(xhr.responseText);
            errorMessage = errorData.error || xhr.statusText;
          } catch (e) {
            errorMessage = xhr.statusText;
          }
          displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + errorMessage, 'error');
        }
      });
    }

    function listUsers() {
      const responseDiv = 'userListResponse';
      displayMessage(responseDiv, 'ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì¤‘...', 'success');
      $.ajax({
        url: '/users/list',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({}),
        success: function(res) {
          if (res.success && res.data && res.data.list) {
            let html = '<ul>';
            if (res.data.list.length === 0) html += '<li>ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
            else res.data.list.forEach(user => {
              html += `<li>ID: ${user.id}, ì´ë¦„: ${user.username}, ì´ë©”ì¼: ${user.email}, ìƒì„±ì¼: ${new Date(user.created_at).toLocaleString()}</li>`;
            });
            html += '</ul>';
            $(`#${responseDiv}`).html(html);
          } else {
            displayMessage(responseDiv, 'ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨: ' + (res.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'), 'error');
          }
        },
        error: function(xhr) {
          displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + xhr.status + ' ' + xhr.statusText, 'error');
        }
      });
    }

    function getUserStats() {
      const responseDiv = 'userStatsResponse';
      displayMessage(responseDiv, 'ì‚¬ìš©ì í†µê³„ ì¡°íšŒ ì¤‘...', 'success');
      $.ajax({
        url: '/users/stats',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({}),
        success: function(res) {
          if (res.success && res.data) {
            displayMessage(responseDiv, `ì´ ì‚¬ìš©ì ìˆ˜: ${res.data.total_users}ëª…`, 'success');
          } else {
            displayMessage(responseDiv, 'ì‚¬ìš©ì í†µê³„ ì¡°íšŒ ì‹¤íŒ¨: ' + (res.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'), 'error');
          }
        },
        error: function(xhr) {
          displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + xhr.status + ' ' + xhr.statusText, 'error');
        }
      });
    }

    function addProblem() {
      const question_text = $('#addProblemQuestion').val().trim();
      const answer_text = $('#addProblemAnswer').val().trim();
      const category = $('#addProblemCategory').val().trim();
      const difficulty = $('#addProblemDifficulty').val().trim();
      const responseDiv = 'addProblemStatus';

      if (!question_text || !answer_text) {
        displayMessage(responseDiv, 'ë¬¸ì œ ë‚´ìš©ê³¼ ì •ë‹µì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
      }
      displayMessage(responseDiv, 'ë¬¸ì œ ì¶”ê°€ ì¤‘...', 'success');
      $.ajax({
        url: '/problems/add',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ question_text, answer_text, category, difficulty }),
        success: function(res) {
          displayMessage(responseDiv, res.message || 'ë¬¸ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
          $('#addProblemQuestion, #addProblemAnswer, #addProblemCategory, #addProblemDifficulty').val('');
        },
        error: function(xhr) {
          let errorMessage = 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
          try {
            const errorData = JSON.parse(xhr.responseText);
            errorMessage = errorData.error || xhr.statusText;
          } catch (e) {
            errorMessage = xhr.statusText;
          }
          displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + errorMessage, 'error');
        }
      });
    }

    function listProblems() {
      const responseDiv = 'problemListResponse';
      displayMessage(responseDiv, 'ë¬¸ì œ ëª©ë¡ ì¡°íšŒ ì¤‘...', 'success');
      $.ajax({
        url: '/problems/list',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({}),
        success: function(res) {
          if (res.success && res.data && res.data.list) {
            let html = '<ul>';
            if (res.data.list.length === 0) html += '<li>ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
            else res.data.list.forEach(p => {
              html += `<li>ID: ${p.id}, ë¬¸ì œ: ${p.question_text.substring(0, 50)}..., ì •ë‹µ: ${p.answer_text.substring(0, 30)}... (ì¹´í…Œê³ ë¦¬: ${p.category || 'ì—†ìŒ'}, ë‚œì´ë„: ${p.difficulty || 'ì—†ìŒ'})</li>`;
            });
            html += '</ul>';
            $(`#${responseDiv}`).html(html);
          } else {
            displayMessage(responseDiv, 'ë¬¸ì œ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨: ' + (res.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'), 'error');
          }
        },
        error: function(xhr) {
          displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + xhr.status + ' ' + xhr.statusText, 'error');
        }
      });
    }

    function deleteProblem() {
      const problemId = $('#deleteProblemId').val().trim();
      const responseDiv = 'deleteProblemStatus';

      if (!problemId) {
        displayMessage(responseDiv, 'ì‚­ì œí•  ë¬¸ì œ IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
      }
      displayMessage(responseDiv, `ë¬¸ì œ ID ${problemId} ì‚­ì œ ì¤‘...`, 'success');
      $.ajax({
        url: '/problems/delete',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ id: problemId }),
        success: function(res) {
          displayMessage(responseDiv, res.message || `ë¬¸ì œ ID ${problemId}ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
          $('#deleteProblemId').val('');
          listProblems();
        },
        error: function(xhr) {
          let errorMessage = 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
          try {
            const errorData = JSON.parse(xhr.responseText);
            errorMessage = errorData.error || xhr.statusText;
          } catch (e) {
            errorMessage = xhr.statusText;
          }
          displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + errorMessage, 'error');
        }
      });
    }

    function deleteUser() {
      const userId = $('#deleteUserId').val().trim();
      const responseDiv = 'deleteUserStatus';

      if (!userId) {
        displayMessage(responseDiv, 'ì‚­ì œí•  ì‚¬ìš©ì IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
      }
      displayMessage(responseDiv, `ì‚¬ìš©ì ID ${userId} ì‚­ì œ ì¤‘...`, 'success');
      $.ajax({
        url: '/users/delete',
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ id: userId }),
        success: function(res) {
          displayMessage(responseDiv, res.message || `ì‚¬ìš©ì ID ${userId}ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
          $('#deleteUserId').val('');
          listUsers();
        },
        error: function(xhr) {
          let errorMessage = 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
          try {
            const errorData = JSON.parse(xhr.responseText);
            errorMessage = errorData.error || xhr.statusText;
          } catch (e) {
            errorMessage = xhr.statusText;
          }
          displayMessage(responseDiv, 'ì˜¤ë¥˜ ë°œìƒ: ' + errorMessage, 'error');
        }
      });
    }

   function loginUser() {
    const usernameOrEmail = $('#loginUsernameOrEmail').val().trim();
    const password = $('#loginPassword').val().trim();
    const responseDiv = 'loginStatus';

    if (!usernameOrEmail || !password) {
        displayMessage(responseDiv, 'ì‚¬ìš©ì ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        return;
    }
    displayMessage(responseDiv, 'ë¡œê·¸ì¸ ì‹œë„ ì¤‘...', 'success');
    $.ajax({
        url: '/users/login', // ë°±ì—”ë“œ ë¼ìš°íŠ¸
        method: 'POST',
        contentType: 'application/json',
        // ğŸ’¡ ì´ ë¶€ë¶„ì´ ìˆ˜ì •ëœ í•µì‹¬ì…ë‹ˆë‹¤:
        data: JSON.stringify({ usernameOrEmail: usernameOrEmail, password }),
        success: function(res) {
            if (res.success) {
                displayMessage(responseDiv, 'ë¡œê·¸ì¸ ì„±ê³µ! í™˜ì˜í•©ë‹ˆë‹¤.', 'success');
                $('#loginUsernameOrEmail').val('');
                $('#loginPassword').val('');
                // ğŸ’¡ ë¡œê·¸ì¸ ì„±ê³µ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ëŠ” UI ë³€ê²½ ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
                // ì˜ˆ: window.location.href = '/dashboard';
            } else {
                displayMessage(responseDiv, res.error || 'ë¡œê·¸ì¸ ì‹¤íŒ¨: ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
            }
        },
        error: function(xhr) {
            let errorMessage = 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
            try {
                const errorData = JSON.parse(xhr.responseText);
                errorMessage = errorData.error || xhr.statusText;
            } catch (e) {
                errorMessage = xhr.statusText;
            }
            displayMessage(responseDiv, 'ë¡œê·¸ì¸ ì˜¤ë¥˜: ' + errorMessage, 'error');
        }
    });
}

    function scrollToSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth' });
      }
    }

      function logoutUser() {
        const responseDiv = 'loginStatus';
        displayMessage(responseDiv, 'ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ ì¤‘...', 'success'); // ë©”ì‹œì§€ ë³€ê²½

        $.ajax({
            url: '/users/logout', // ë°±ì—”ë“œ ë¡œê·¸ì•„ì›ƒ ë¼ìš°íŠ¸ í˜¸ì¶œ
            method: 'POST', // POST ìš”ì²­ (ì„¸ì…˜ ë¬´íš¨í™” ë“±ì˜ ì‘ì—…ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ)
            contentType: 'application/json', // JSON í˜•ì‹ìœ¼ë¡œ ë³´ë‚¼ ë°ì´í„°ëŠ” ì—†ì§€ë§Œ ëª…ì‹œ
            data: JSON.stringify({}), // ë³´ë‚¼ ë°ì´í„° ì—†ìŒ
            success: function(res) {
                if (res.success) {
                    displayMessage(responseDiv, res.message || 'ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                    $('#loginUsernameOrEmail').val(''); // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                    $('#loginPassword').val(''); // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                    // í•„ìš”í•˜ë‹¤ë©´ í˜ì´ì§€ ë¦¬ë‹¤ì´ë ‰ì…˜
                    // window.location.href = '/';
                } else {
                    displayMessage(responseDiv, res.error || 'ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨: ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜', 'error');
                }
            },
            error: function(xhr) {
                let errorMessage = 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
                try {
                    const errorData = JSON.parse(xhr.responseText);
                    errorMessage = errorData.error || xhr.statusText;
                } catch (e) {
                    errorMessage = xhr.statusText;
                }
                displayMessage(responseDiv, 'ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜: ' + errorMessage, 'error');
            }
        });
    }

  </script>
</body>
</html>
